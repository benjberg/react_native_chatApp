{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport firebase from \"firebase\";\n\nvar Fire = function () {\n  function Fire() {\n    var _this = this;\n\n    _classCallCheck(this, Fire);\n\n    this.init = function () {\n      if (!firebase.apps.length) {\n        firebase.initializeApp({\n          apiKey: \"AIzaSyCGBmfQ1TOfluPCEcPci05W29WgSJNmxQU\",\n          authDomain: \"chatapp-17e0f.firebaseapp.com\",\n          databaseURL: \"https://chatapp-17e0f.firebaseio.com\",\n          projectId: \"chatapp-17e0f\",\n          storageBucket: \"chatapp-17e0f.appspot.com\",\n          messagingSenderId: \"169227118560\",\n          appId: \"1:169227118560:web:3698441d45ddfb1966ed85\",\n          measurementId: \"G-FHHWHP5BJR\"\n        });\n      }\n    };\n\n    this.checkAuth = function () {\n      firebase.auth().onAuthStateChanged(function (user) {\n        if (!user) {\n          firebase.auth().signInAnonymously();\n        }\n      });\n    };\n\n    this.send = function (messages) {\n      messages.forEach(function (item) {\n        var message = {\n          text: item.text,\n          timestamp: firebase.database.ServerValue.TIMESTAMP,\n          user: item.user\n        };\n\n        _this.db.push(message);\n      });\n    };\n\n    this.parse = function (message) {\n      var _message$val = message.val(),\n          user = _message$val.user,\n          text = _message$val.text,\n          timestamp = _message$val.timestamp;\n\n      var _id = message.key;\n      var createdAr = new Date(timestamp);\n      return {\n        _id: _id,\n        createdAt: createdAt,\n        text: text,\n        user: user\n      };\n    };\n\n    this.get = function (callback) {\n      _this.db.on(\"child_added\", function (snapshot) {\n        return callback(_this.parse(snapshot));\n      });\n    };\n\n    this.init();\n    this.checkAuth();\n  }\n\n  _createClass(Fire, [{\n    key: \"off\",\n    value: function off() {\n      this.db.off();\n    }\n  }, {\n    key: \"db\",\n    get: function get() {\n      return firebase.database().ref(\"messages\");\n    }\n  }, {\n    key: \"uid\",\n    get: function get() {\n      return (firebase.auth().currentUser || {}).uid;\n    }\n  }]);\n\n  return Fire;\n}();\n\nexport default new Fire();","map":{"version":3,"sources":["C:/Users/bbjbe/Desktop/projects/react-native-chatapp/chatapp/Fire.js"],"names":["firebase","Fire","init","apps","length","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","checkAuth","auth","onAuthStateChanged","user","signInAnonymously","send","messages","forEach","item","message","text","timestamp","database","ServerValue","TIMESTAMP","db","push","parse","val","_id","key","createdAr","Date","createdAt","get","callback","on","snapshot","off","ref","currentUser","uid"],"mappings":";;AAAA,OAAOA,QAAP,MAAqB,UAArB;;IAEMC,I;AACJ,kBAAc;AAAA;;AAAA;;AAAA,SAIdC,IAJc,GAIP,YAAM;AACX,UAAI,CAACF,QAAQ,CAACG,IAAT,CAAcC,MAAnB,EAA2B;AACzBJ,QAAAA,QAAQ,CAACK,aAAT,CAAuB;AACrBC,UAAAA,MAAM,EAAE,yCADa;AAErBC,UAAAA,UAAU,EAAE,+BAFS;AAGrBC,UAAAA,WAAW,EAAE,sCAHQ;AAIrBC,UAAAA,SAAS,EAAE,eAJU;AAKrBC,UAAAA,aAAa,EAAE,2BALM;AAMrBC,UAAAA,iBAAiB,EAAE,cANE;AAOrBC,UAAAA,KAAK,EAAE,2CAPc;AAQrBC,UAAAA,aAAa,EAAE;AARM,SAAvB;AAUD;AACF,KAjBa;;AAAA,SAmBdC,SAnBc,GAmBF,YAAM;AAChBd,MAAAA,QAAQ,CAACe,IAAT,GAAgBC,kBAAhB,CAAmC,UAACC,IAAD,EAAU;AAC3C,YAAI,CAACA,IAAL,EAAW;AACTjB,UAAAA,QAAQ,CAACe,IAAT,GAAgBG,iBAAhB;AACD;AACF,OAJD;AAKD,KAzBa;;AAAA,SA2BdC,IA3Bc,GA2BP,UAACC,QAAD,EAAc;AACnBA,MAAAA,QAAQ,CAACC,OAAT,CAAiB,UAACC,IAAD,EAAU;AACzB,YAAMC,OAAO,GAAG;AACdC,UAAAA,IAAI,EAAEF,IAAI,CAACE,IADG;AAEdC,UAAAA,SAAS,EAAEzB,QAAQ,CAAC0B,QAAT,CAAkBC,WAAlB,CAA8BC,SAF3B;AAGdX,UAAAA,IAAI,EAAEK,IAAI,CAACL;AAHG,SAAhB;;AAKA,QAAA,KAAI,CAACY,EAAL,CAAQC,IAAR,CAAaP,OAAb;AACD,OAPD;AAQD,KApCa;;AAAA,SAsCdQ,KAtCc,GAsCN,UAACR,OAAD,EAAa;AAAA,yBACeA,OAAO,CAACS,GAAR,EADf;AAAA,UACXf,IADW,gBACXA,IADW;AAAA,UACLO,IADK,gBACLA,IADK;AAAA,UACCC,SADD,gBACCA,SADD;;AAAA,UAENQ,GAFM,GAEEV,OAFF,CAEXW,GAFW;AAGnB,UAAMC,SAAS,GAAG,IAAIC,IAAJ,CAASX,SAAT,CAAlB;AAEA,aAAO;AACLQ,QAAAA,GAAG,EAAHA,GADK;AAELI,QAAAA,SAAS,EAATA,SAFK;AAGLb,QAAAA,IAAI,EAAJA,IAHK;AAILP,QAAAA,IAAI,EAAJA;AAJK,OAAP;AAMD,KAjDa;;AAAA,SAmDdqB,GAnDc,GAmDR,UAACC,QAAD,EAAc;AAClB,MAAA,KAAI,CAACV,EAAL,CAAQW,EAAR,CAAW,aAAX,EAA0B,UAACC,QAAD;AAAA,eAAcF,QAAQ,CAAC,KAAI,CAACR,KAAL,CAAWU,QAAX,CAAD,CAAtB;AAAA,OAA1B;AACD,KArDa;;AACZ,SAAKvC,IAAL;AACA,SAAKY,SAAL;AACD;;;;0BAoDK;AACJ,WAAKe,EAAL,CAAQa,GAAR;AACD;;;wBAEQ;AACP,aAAO1C,QAAQ,CAAC0B,QAAT,GAAoBiB,GAApB,CAAwB,UAAxB,CAAP;AACD;;;wBAES;AACR,aAAO,CAAC3C,QAAQ,CAACe,IAAT,GAAgB6B,WAAhB,IAA+B,EAAhC,EAAoCC,GAA3C;AACD;;;;;;AAGH,eAAe,IAAI5C,IAAJ,EAAf","sourcesContent":["import firebase from \"firebase\";\r\n\r\nclass Fire {\r\n  constructor() {\r\n    this.init();\r\n    this.checkAuth();\r\n  }\r\n  init = () => {\r\n    if (!firebase.apps.length) {\r\n      firebase.initializeApp({\r\n        apiKey: \"AIzaSyCGBmfQ1TOfluPCEcPci05W29WgSJNmxQU\",\r\n        authDomain: \"chatapp-17e0f.firebaseapp.com\",\r\n        databaseURL: \"https://chatapp-17e0f.firebaseio.com\",\r\n        projectId: \"chatapp-17e0f\",\r\n        storageBucket: \"chatapp-17e0f.appspot.com\",\r\n        messagingSenderId: \"169227118560\",\r\n        appId: \"1:169227118560:web:3698441d45ddfb1966ed85\",\r\n        measurementId: \"G-FHHWHP5BJR\",\r\n      });\r\n    }\r\n  };\r\n\r\n  checkAuth = () => {\r\n    firebase.auth().onAuthStateChanged((user) => {\r\n      if (!user) {\r\n        firebase.auth().signInAnonymously();\r\n      }\r\n    });\r\n  };\r\n\r\n  send = (messages) => {\r\n    messages.forEach((item) => {\r\n      const message = {\r\n        text: item.text,\r\n        timestamp: firebase.database.ServerValue.TIMESTAMP,\r\n        user: item.user,\r\n      };\r\n      this.db.push(message);\r\n    });\r\n  };\r\n\r\n  parse = (message) => {\r\n    const { user, text, timestamp } = message.val();\r\n    const { key: _id } = message;\r\n    const createdAr = new Date(timestamp);\r\n\r\n    return {\r\n      _id,\r\n      createdAt,\r\n      text,\r\n      user,\r\n    };\r\n  };\r\n\r\n  get = (callback) => {\r\n    this.db.on(\"child_added\", (snapshot) => callback(this.parse(snapshot)));\r\n  };\r\n\r\n  off() {\r\n    this.db.off();\r\n  }\r\n\r\n  get db() {\r\n    return firebase.database().ref(\"messages\");\r\n  }\r\n\r\n  get uid() {\r\n    return (firebase.auth().currentUser || {}).uid;\r\n  }\r\n}\r\n\r\nexport default new Fire();\r\n"]},"metadata":{},"sourceType":"module"}